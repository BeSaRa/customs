<div class="dialog-container">
  <div class="dialog-header bg-primary">
    <h1>{{ lang.map.offender_violations }}</h1>
    <app-icon-button tabindex="-1" mat-dialog-close="" class="close-btn" icon="CLOSE"></app-icon-button>
  </div>
  <div class="dialog-content w-[900px] !p-0">
    <div class="p-4">
      <app-select-input
        *ngIf="!readonly"
        [formControl]="control"
        [label]="lang.map.violations"
        bindLabel="getOffenderViolationSelectNames"
        bindValue="id"
        [isMultiple]="true"
        [options]="violations">
        <span appInputSuffix>
          <app-icon-button
            (click)="addViolation$.next()"
            [matTooltip]="lang.map.add_selected"
            class="text-primary"
            icon="PLUS_BOX"></app-icon-button>
        </span>
      </app-select-input>
      <table mat-table matSort class="table-style table-primary" [dataSource]="dataSource">
        <!-- violationType -->
        <ng-container matColumnDef="violationType">
          <th mat-header-cell mat-sort-header="violationType" *matHeaderCellDef>{{ lang.map.violation_type }}</th>
          <td mat-cell *matCellDef="let element">{{ element.violationInfo?.violationTypeInfo?.getNames() }}</td>
        </ng-container>
        <!-- classification -->
        <ng-container matColumnDef="description">
          <th mat-header-cell mat-sort-header="description" *matHeaderCellDef>{{ lang.map.description }}</th>
          <td mat-cell *matCellDef="let element">{{ element.violationInfo?.description }}</td>
        </ng-container>
        <!-- violation data -->
        <ng-container matColumnDef="violationData">
          <th mat-header-cell mat-sort-header="violationData" *matHeaderCellDef>{{ lang.map.violation_date }}</th>
          <td mat-cell *matCellDef="let element">
            <span *ngIf="element.violationInfo?.violationsDate">
              {{ element.violationInfo?.violationsDate | date }}
            </span>
            <span *ngIf="!element.violationInfo?.violationsDate">
              {{ lang.map.date_from }} {{ element.violationInfo?.violationsDateFrom | date }} {{ lang.map.date_to }}
              {{ element.violationInfo?.violationsDateTo | date }}
            </span>
          </td>
        </ng-container>
        <!-- repeat -->
        <ng-container matColumnDef="repeat">
          <th mat-header-cell mat-sort-header="repeat" *matHeaderCellDef>{{ lang.map.repeat }}</th>
          <td mat-cell *matCellDef="let element">{{ element.repeat }}</td>
        </ng-container>
        <!-- actions -->
        <ng-container matColumnDef="actions">
          <th mat-header-cell mat-sort-header="actions" *matHeaderCellDef>{{ lang.map.actions }}</th>
          <td mat-cell *matCellDef="let element">
            <div class="flex gap-2">
              <div [matTooltip]="lang.map.delete" *ngIf="!readonly">
                <app-icon-button (click)="delete$.next(element)" icon="DELETE" />
              </div>
            </div>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let element; columns: displayedColumns"></tr>
        <tr class="mat-row" *matNoDataRow>
          <td class="p-4" colspan="100">{{ lang.map.no_records_to_display }}</td>
        </tr>
      </table>
    </div>
  </div>
  <div class="dialog-footer justify-end">
    <app-button mat-dialog-close="" buttonType="primary-outline">{{ lang.map.close }}</app-button>
  </div>
</div>
